# Nix configuration file
# For more options, see:
# https://nix.dev/manual/nix/latest/command-ref/conf-file.html

# Make warnings fatal to catch issues early
abort-on-warn = true

# Enable flake support
accept-flake-config = true

# GitHub access token for private repos (uncomment and set your token if needed)
# access-tokens = github.com=23ac...b289

# Allow building in dirty git repositories
allow-dirty = true

# Disallow locking in dirty git repositories
allow-dirty-locks = false

# Allow importing derivations from other derivations
allow-import-from-derivations = true

# Disallow escalating privileges during builds
allow-new-privileges = false

# Disallow symlinked store paths
allow-symlinked-store = false

# Disallow unsafe native code during evaluation
allow-unsafe-native-code-during-evaluation = false

# Allow impure host dependencies (needed for some setups)
# allowed-impure-host-deps = /usr/bin/env

# Configure trusted binary caches
# allowed-uris = file:///* https://cache.nixos.org https://nixpkgs/nixpkgs-unstable

# Specify which users are allowed to use Nix
allowed-users = root vscode

# Always allow substitutes from trusted binary caches
always-allow-substitutes = false

# Disable automatic UID allocation
# auto-allocate-uids = false

# The bash prompt (PS1) in nix develop shells.
# bash-prompt =

# Suffix appended to the PS1 environment variable in nix develop shells.
# bash-prompt-suffix =

# This options specifies the Unix group containing the Nix build user accounts.
# build-users-group = nixbld

# How often (in seconds) to poll for locks.
build-poll-interval = 5

# The path to the helper program that executes remote builds.
build-hook = nix __build-remote

# Override the build-dir store setting for all stores that have this setting.
# build-dir = ``

# A semicolon- or newline-separated list of build machines.
# builders =

# If set to true, Nix instructs remote build machines to use their own substituters if available.
builders-use-substitutes = false

# The commit summary to use when committing changed flake lock files. If empty, the summary is generated based on the action performed.
# commit-lock-file-summary =

# If set to true (the default), build logs written to /nix/var/log/nix/drvs are compressed on the fly using bzip2. Otherwise, they are not compressed.
compress-build-log = true

# The timeout (in seconds) for establishing connections in the binary cache substituter. It corresponds to curl’s --connect-timeout option. A value of 0 means no limit.
connect-timeout = 15

# Sets the value of the NIX_BUILD_CORES environment variable in the invocation of the builder executable of a derivation. If set to 0, nix will detect the number of CPU cores and pass this number via NIX_BUILD_CORES.
cores = 0

# If set to true and the --debugger flag is given, the following functions enter the debugger like builtins.break
debugger-on-trace = false

# If set to true and the --debugger flag is given, builtins.warn will enter the debugger like builtins.break.
debugger-on-warn = false

# Absolute path to an executable capable of diffing build results.
# diff-hook = ``

# The number of times Nix attempts to download a file before giving up.
download-attempts = 5

# The size of Nix's internal download buffer in bytes during curl transfers. If data is not processed quickly enough to exceed the size of this buffer, downloads may stall. The default is 1048576 (1 MiB).
download-buffer-size = 1048576

# Specify the maximum transfer rate in kilobytes per second you want Nix to use for downloads.
download-speed = 0

# Tunes the maximum size of an attribute set that, when used as a right operand in an attribute set update expression, uses a more space-efficient linked-list representation of attribute sets.
eval-attrset-update-layer-rhs-threshold = 16

# Whether to use the flake evaluation cache. Certain commands won't have to evaluate when invoked for the second time with a particular version of a flake. Intermediate results are not cached.
eval-cache = true

# Specifies the file where evaluation profile is saved.
eval-profile-file = nix.profile

# Enables evaluation profiling.
eval-profiler = disabled

# Specifies the sampling rate in hertz for sampling evaluation profilers. Use 0 to sample the stack after each function call. See eval-profiler.
eval-profiler-frequency = 99

# This option defines builtins.currentSystem in the Nix language if it is set as a non-empty string. Otherwise, if it is defined as the empty string (the default), the value of the system configuration setting is used instead.
# eval-system =

# Experimental features that are enabled.
experimental-features = nix-command flakes

# Helper programs that execute derivations.
# external-builders =

# System types of executables that can be run on this machine.
# extra-platforms =

# If set to true, Nix falls back to building from source if a binary substitute fails. This is equivalent to the --fallback flag. The default is false.
fallback = false

# Whether to prevent certain dangerous system calls, such as creation of setuid/setgid files or adding ACLs or extended attributes. Only disable this if you're aware of the security implications.
filter-syscalls = false

# Path or URI of the global flake registry. When empty, disables the global flake registry.
flake-registry = https://channels.nixos.org/flake-registry.json

# Whether to call fsync() on store paths before registering them, to flush them to disk. This improves robustness in case of system crashes, but reduces performance. The default is false.
fsync-store-paths = false

# Amount of reserved disk space for the garbage collector.
gc-reserved-space = 8388608

# A list of web servers used by builtins.fetchurl to obtain files by hash.
# hashed-mirrors =

# The maximum number of parallel TCP connections used to fetch files from binary caches and by other downloads. It defaults to 25. 0 means no limit.
http-connections = 25

# Whether to enable HTTP/2 support.
http2 = true

# The number of UIDs/GIDs to use for dynamic ID allocation.
id-count = 8388608

# If set to true, ignore exceptions inside 'tryEval' calls when evaluating Nix expressions in debug mode (using the --debugger flag). By default the debugger pauses on all exceptions.
ignore-try = false

# A list of ACLs that should be ignored, normally Nix attempts to remove all ACLs from files and directories in the Nix store, but some ACLs like security.selinux or system.nfs4_acl can't be removed even by root. Therefore it's best to just ignore them.
ignored-acls = security.csm security.selinux system.nfs4_acl

# Whether to impersonate a Linux 2.6 machine on newer kernels.
impersonate-linux-26 = false

# If the user is trusted (see trusted-users option), when building a fixed-output derivation, environment variables set in this option is passed to the builder if they are listed in impureEnvVars.
# impure-env =

# A file or unix socket to which JSON records of Nix's log output are written.
json-log = /var/log/nix/nix-log.json

# If set to true (the default), Nix writes the build log of a derivation (i.e. the standard output and error of its builder) to the directory /nix/var/log/nix/drvs. The build log can be retrieved using the command nix-store -l path.
keep-build-log = true

# If true (default), the garbage collector keeps the derivations from which non-garbage store paths were built. If false, they are deleted unless explicitly registered as a root (or reachable from other roots).
keep-derivations = true

# If false (default), derivations are not stored in Nix user environments. That is, the derivations of any build-time-only dependencies may be garbage-collected.
# If true, when you add a Nix derivation to a user environment, the path of the derivation is stored in the user environment.
keep-env-derivations = false

# Whether to keep temporary directories of failed builds.
keep-failed = false

# Whether to keep building derivations when another build fails.
keep-going = false

# If true, the garbage collector keeps the outputs of non-garbage derivations. If false (default), outputs are deleted unless they are GC roots themselves (or reachable from other roots).
keep-outputs = false

# The number of lines of the tail of the log to show if a build fails.
log-lines = 25

# This option defines the maximum number of bytes that a builder can write to its stdout/stderr. If the builder exceeds this limit, it’s killed. A value of 0 (the default) means that there is no limit.
max-build-log-size = 0

# The maximum function call depth to allow before erroring.
max-call-depth = 10000

# When a garbage collection is triggered by the min-free option, it stops as soon as max-free bytes are available. The default is infinity (i.e. delete all garbage).
max-free = 9223372036854775807

# Maximum number of jobs that Nix tries to build locally in parallel.
max-jobs = 1

# This option defines the maximum number of seconds that a builder can go without producing any data on standard output or standard error.
# The value 0 means that there is no timeout. This is also the default.
max-silent-time = 0

# This option defines the maximum number of substitution jobs that Nix tries to run in parallel. The default is 16. The minimum value one can choose is 1 and lower values are interpreted as 1.
max-substitution-jobs = 16

# When free disk space in /nix/store drops below min-free during a build, Nix performs a garbage-collection until max-free bytes are available or there is no more garbage. A value of 0 (the default) disables this feature.
min-free = 0

# Number of seconds between checking free disk space.
min-free-check-interval = 5

# Maximum size of NARs before spilling them to disk.
nar-buffer-size = 33554432

# The TTL in seconds for negative lookups. If a store path is queried from a substituter but was not found, a negative lookup is cached in the local disk cache database for the specified duration.
# Set to 0 to force updating the lookup cache.
narinfo-cache-negative-ttl = 3600

# The TTL in seconds for positive lookups.
narinfo-cache-positive-ttl = 2592000

# If set to an absolute path to a netrc file, Nix uses the HTTP authentication credentials in this file when trying to download from a remote host through HTTP or HTTPS. Defaults to $NIX_CONF_DIR/netrc.
# netrc-file =

# List of search paths to use for lookup path resolution. This setting determines the value of builtins.nixPath and can be used with builtins.findFile.
# nix-path =

# A list of plugin files to be loaded by Nix.
# plugin-files =

# Optional. The path to a program to execute after each build.
# This option is only settable in the global nix.conf, or on the command line by trusted users.
# post-build-hook =

# If set, the path to a program that can set extra derivation-specific settings for this system.
# pre-build-hook =

# Whether to preallocate files when writing objects with known size.
preallocate-contents = false

# Whether to print what paths need to be built or downloaded.
print-missing = true

# Pure evaluation mode ensures that the result of Nix expressions is fully determined by explicitly declared inputs, and not influenced by external state.
pure-eval = false

# Following the principle of least privilege, Nix attempts to drop supplementary groups when building with sandboxing.
require-drop-supplementary-groups = false

# If set to true (the default), any non-content-addressed path added or copied to the Nix store (e.g. when substituting from a binary cache) must have a signature by a trusted key. A trusted key is one listed in trusted-public-keys, or a public key counterpart to a private key stored in a file listed in secret-key-files.
# Set to false to disable signature checking and trust all non-content-addressed paths unconditionally.
require-sigs = true

# If set to true, the Nix evaluator doesn't allow access to any files outside of builtins.nixPath, or to URIs outside of allowed-uris.
restrict-eval = false

# If true, enable the execution of the diff-hook program.
# When using the Nix daemon, run-diff-hook must be set in the nix.conf configuration file, and cannot be passed at the command line.
run-diff-hook = false

# If set to true, builds are performed in a sandboxed environment, i.e., they’re isolated from the normal file system hierarchy and only see their dependencies in the Nix store, the temporary build directory, private versions of /proc, /dev, /dev/shm and /dev/pts (on Linux), and the paths configured with the sandbox-paths option.
# Required for devcontainers
sandbox = false

# The build directory inside the sandbox. This directory is backed by build-dir on the host.
sandbox-build-dir = /build

# This option determines the maximum size of the tmpfs filesystem mounted on /dev/shm in Linux sandboxes. For the format, see the description of the size option of tmpfs in mount(8). The default is 50%.
sandbox-dev-shm-size = 50%

# Whether to disable sandboxing when the kernel doesn't allow it.
sandbox-fallback = true

# A list of paths bind-mounted into Nix sandbox environments.
# sandbox-paths =

# A whitespace-separated list of files containing secret (private) keys.
# secret-key-files =

# Whether Nix should print out a stack trace in case of Nix expression evaluation errors.
show-trace = false

# The path of a file containing CA certificates used to authenticate https:// downloads.
# ssl-cert-file =

# The timeout (in seconds) for receiving data from servers during download. Nix cancels idle downloads after this timeout's duration.
stalled-download-timeout = 300

# The first UID and GID to use for dynamic ID allocation.
start-id = 872415232

# The URL of the Nix store to use for most operations. See the Store Types section of the manual for supported store types and settings.
store = auto

# If set to true (default), Nix uses binary substitutes if available. This option can be disabled to force building from source.
substitute = true

# A list of URLs of Nix stores to be used as substituters, separated by whitespace. A substituter is an additional store from which Nix can obtain store objects instead of building them.
substituters = https://cache.nixos.org/

# Whether to call sync() before registering a path as valid.
sync-before-registering = false

# The system type of the current Nix installation.
# system = x86_64-linux

# A set of system “features” supported by this machine.
# system-features =

# The number of seconds a downloaded tarball is considered fresh. If the cached tarball is stale, Nix checks whether it is still up to date using the ETag header. Nix downloads a new version if the ETag header is unsupported, or the cached ETag doesn't match.
# Setting the TTL to 0 forces Nix to always check if the tarball is up to date.
# Nix caches tarballs in $XDG_CACHE_HOME/nix/tarballs.
# Files fetched via NIX_PATH, fetchGit, fetchMercurial, fetchTarball, and fetchurl respect this TTL.
tarball-ttl = 3600

# This option defines the maximum number of seconds that a builder can run.
timeout = 0

# If set to true, the Nix evaluator traces every function call. Nix prints a log message at the "vomit" level for every function entrance and function exit.
trace-function-calls = false

# By default, Nix allows Import from Derivation.
# When this setting is true, Nix logs a warning indicating that it performed such an import. This option has no effect if allow-import-from-derivation is disabled.
trace-import-from-derivation = false

# Whether builtins.traceVerbose should trace its first argument when evaluated.
trace-verbose = false

# If enabled (the default), Nix considers tarballs from GitHub and similar Git forges to be locked if a Git revision is specified.
trust-tarballs-from-git-forges = true

# A whitespace-separated list of public keys.
trusted-public-keys = cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY=

# A list of Nix store URLs, separated by whitespace. These are not used by default, but users of the Nix daemon can enable them by specifying substituters.
# trusted-substituters =

# Avoid permission pain in containers
trusted-users = root vscode

# Used by nix upgrade-nix, the URL of the file that contains the store paths of the latest Nix release.
upgrade-nix-store-path-url = https://github.com/NixOS/nixpkgs/raw/master/nixos/modules/installer/tools/nix-fallback-paths.nix

# Whether to enable a macOS-specific hack for dealing with file name case collisions.
use-case-hack = false

# Whether to execute builds inside cgroups. This is only supported on Linux.
use-cgroups = false

# Whether to use flake registries to resolve flake references.
use-registries = true

# Enable Write-Ahead Logging for SQLite to improve performance
use-sqlite-wal = true

# Respect your XDG + Universal layout philosophy
use-xdg-base-directories = true

# Suffix to append to the User-Agent header sent by Nix when making HTTP requests.
user-agent-suffix = nix-devcontainer

# Whether to warn about dirty Git/Mercurial trees.
warn-dirty = true

# Warn when copying a path larger than this number of bytes to the Nix store (as determined by its NAR serialization). Default is 0, which disables the warning. Set it to 1 to warn on all paths.
warn-large-path-threshold = 0

# Disable warnings about short path literals
warn-short-path-literals = false
